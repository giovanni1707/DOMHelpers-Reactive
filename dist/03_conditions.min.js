/**
 * 01_dh-conditional-rendering
 * 
 * Conditions.whenState() - Works with or without Reactive State
 * @version 4.0.1 - Fixed Proxy/Symbol iterator issue with Collections
 * @license MIT
 */
!function(e){"use strict";const t=!!e.ReactiveUtils,n=!!e.Elements,o=!!e.Collections,r=!!e.Selector;let s,i,a;t?(s=e.ReactiveUtils.effect,i=e.ReactiveUtils.batch,a=e.ReactiveUtils.isReactive):n&&"function"==typeof e.Elements.effect&&(s=e.Elements.effect,i=e.Elements.batch,a=e.Elements.isReactive);const l=!(!s||!i),c={booleanTrue:{test:e=>"true"===e,match:e=>!0===e},booleanFalse:{test:e=>"false"===e,match:e=>!1===e},truthy:{test:e=>"truthy"===e,match:e=>!!e},falsy:{test:e=>"falsy"===e,match:e=>!e},null:{test:e=>"null"===e,match:e=>null===e},undefined:{test:e=>"undefined"===e,match:e=>void 0===e},empty:{test:e=>"empty"===e,match:e=>null==e||("string"==typeof e||Array.isArray(e)?0===e.length:"object"==typeof e?0===Object.keys(e).length:!e)},quotedString:{test:e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"),match:(e,t)=>String(e)===t.slice(1,-1)},includes:{test:e=>e.startsWith("includes:"),match:(e,t)=>{const n=t.slice(9).trim();return String(e).includes(n)}},startsWith:{test:e=>e.startsWith("startsWith:"),match:(e,t)=>{const n=t.slice(11).trim();return String(e).startsWith(n)}},endsWith:{test:e=>e.startsWith("endsWith:"),match:(e,t)=>{const n=t.slice(9).trim();return String(e).endsWith(n)}},regex:{test:e=>e.startsWith("/")&&e.lastIndexOf("/")>0,match:(e,t)=>{try{const n=t.lastIndexOf("/"),o=t.slice(1,n),r=t.slice(n+1);return new RegExp(o,r).test(String(e))}catch(e){return console.warn("[Conditions] Invalid regex pattern:",t,e),!1}}},numericRange:{test:(e,t)=>"number"==typeof t&&e.includes("-")&&!e.startsWith("<")&&!e.startsWith(">")&&!e.startsWith("="),match:(e,t)=>{const n=t.split("-").map(e=>e.trim());if(2===n.length&&!isNaN(n[0])&&!isNaN(n[1])){const[t,o]=n.map(Number);return e>=t&&e<=o}return!1}},numericExact:{test:(e,t)=>"number"==typeof t&&!isNaN(e),match:(e,t)=>e===Number(t)},greaterThanOrEqual:{test:(e,t)=>"number"==typeof t&&e.startsWith(">="),match:(e,t)=>{const n=Number(t.slice(2).trim());return!isNaN(n)&&e>=n}},lessThanOrEqual:{test:(e,t)=>"number"==typeof t&&e.startsWith("<="),match:(e,t)=>{const n=Number(t.slice(2).trim());return!isNaN(n)&&e<=n}},greaterThan:{test:(e,t)=>"number"==typeof t&&e.startsWith(">")&&!e.startsWith(">="),match:(e,t)=>{const n=Number(t.slice(1).trim());return!isNaN(n)&&e>n}},lessThan:{test:(e,t)=>"number"==typeof t&&e.startsWith("<")&&!e.startsWith("<="),match:(e,t)=>{const n=Number(t.slice(1).trim());return!isNaN(n)&&e<n}},stringEquality:{test:()=>!0,match:(e,t)=>String(e)===t}};function u(e,t){t=String(t).trim();for(const n of Object.values(c))if(n.test(t,e))return n.match(e,t);return!1}const d={style:{test:(e,t)=>"style"===e&&"object"==typeof t&&null!==t,apply:(e,t)=>{Object.entries(t).forEach(([t,n])=>{null!=n&&(e.style[t]=n)})}},classList:{test:(e,t)=>"classList"===e&&"object"==typeof t&&null!==t,apply:(e,t)=>{if(Array.isArray(t))e.className="",t.forEach(t=>t&&e.classList.add(t));else{const n={add:t=>{(Array.isArray(t)?t:[t]).forEach(t=>t&&e.classList.add(t))},remove:t=>{(Array.isArray(t)?t:[t]).forEach(t=>t&&e.classList.remove(t))},toggle:t=>{(Array.isArray(t)?t:[t]).forEach(t=>t&&e.classList.toggle(t))},replace:t=>{Array.isArray(t)&&2===t.length&&e.classList.replace(t[0],t[1])}};Object.entries(t).forEach(([e,t])=>{n[e]&&n[e](t)})}}},setAttribute:{test:(e,t)=>("attrs"===e||"setAttribute"===e)&&"object"==typeof t&&null!==t,apply:(e,t)=>{Object.entries(t).forEach(([t,n])=>{null==n||!1===n?e.removeAttribute(t):e.setAttribute(t,String(n))})}},removeAttribute:{test:e=>"removeAttribute"===e,apply:(e,t)=>{Array.isArray(t)?t.forEach(t=>e.removeAttribute(t)):"string"==typeof t&&e.removeAttribute(t)}},dataset:{test:(e,t)=>"dataset"===e&&"object"==typeof t&&null!==t,apply:(e,t)=>{Object.entries(t).forEach(([t,n])=>{e.dataset[t]=String(n)})}},addEventListener:{test:(e,t)=>"addEventListener"===e&&"object"==typeof t&&null!==t,apply:(e,t)=>{e._whenStateListeners||(e._whenStateListeners=[]),Object.entries(t).forEach(([t,n])=>{let o,r;"function"==typeof n?(o=n,r=void 0):"object"==typeof n&&null!==n&&(o=n.handler,r=n.options),o&&"function"==typeof o&&(e.addEventListener(t,o,r),e._whenStateListeners.push({event:t,handler:o,options:r}))})}},removeEventListener:{test:(e,t)=>"removeEventListener"===e&&Array.isArray(t)&&t.length>=2,apply:(e,t)=>{const[n,o,r]=t;e.removeEventListener(n,o,r)}},eventProperty:{test:(e,t)=>e.startsWith("on")&&"function"==typeof t,apply:(e,t,n)=>{e[n]=t}},nativeProperty:{test:(e,t,n)=>e in n,apply:(e,t,n)=>{e[n]=t}},fallback:{test:(e,t)=>"string"==typeof t||"number"==typeof t||"boolean"==typeof t,apply:(e,t,n)=>{e.setAttribute(n,String(t))}}};function h(e){if(!e)return[];if(Array.isArray(e))return e;if(e instanceof NodeList||e instanceof HTMLCollection)return Array.from(e);if("object"==typeof e&&"length"in e)try{return Array.from(e)}catch(t){const n=[],o=e.length;for(let t=0;t<o;t++)t in e&&n.push(e[t]);return n}return[]}function f(e,t,n){if(e.update&&"function"==typeof e.update)try{return void e.update(t)}catch(e){console.warn("[Conditions] Error using element.update():",e)}Object.entries(t).forEach(([t,n])=>{try{!function(e,t,n){for(const o of Object.values(d))if(o.test(t,n,e))return void o.apply(e,n,t)}(e,t,n)}catch(e){console.warn(`[Conditions] Failed to apply ${t}:`,e)}})}function p(t,s,i){const a=function(t){if(t instanceof Element)return[t];if(t instanceof NodeList||t instanceof HTMLCollection)return Array.from(t);if(Array.isArray(t))return t.filter(e=>e instanceof Element);if("string"==typeof t){if(t.startsWith("#")){const o=t.slice(1);if(n&&e.Elements[o])return[e.Elements[o]];const r=document.getElementById(o);return r?[r]:[]}if(t.startsWith(".")){const n=t.slice(1);if(o&&e.Collections.ClassName){const t=e.Collections.ClassName[n];if(t)return h(t)}return Array.from(document.getElementsByClassName(n))}if(r&&e.Selector.queryAll){const n=e.Selector.queryAll(t);return n?h(n):[]}return Array.from(document.querySelectorAll(t))}return[]}(i);if(!a||0===a.length)return void console.warn("[Conditions] No elements found for selector:",i);let l,c;try{l=t()}catch(e){return void console.error("[Conditions] Error getting value:",e)}try{c="function"==typeof s?s():s}catch(e){return void console.error("[Conditions] Error evaluating conditions:",e)}a.forEach(e=>{!function(e){e._whenStateListeners&&(e._whenStateListeners.forEach(({event:t,handler:n,options:o})=>{e.removeEventListener(t,n,o)}),e._whenStateListeners=[])}(e);for(const[t,n]of Object.entries(c))if(u(l,t)){f(e,n);break}})}const g={whenState(e,t,n,o={}){if(!t||"object"!=typeof t&&"function"!=typeof t)return void console.error("[Conditions] Second argument must be an object or function returning an object");const r=!1!==o.reactive&&l,i="function"==typeof e,c=i?e:()=>e,u=i&&l&&"function"==typeof a&&a(e());return r&&(i||u)?s(()=>{p(c,t,n)}):(p(c,t,n),{update:()=>p(c,t,n),destroy:()=>{}})},apply(e,t,n){return p("function"==typeof e?e:()=>e,t,n),this},watch(e,t,n){return l?this.whenState(e,t,n,{reactive:!0}):(console.warn("[Conditions] watch() requires reactive library"),this.apply(e,t,n))},batch:e=>i&&"function"==typeof i?i(e):e(),registerMatcher(e,t){return function(e,t){t.test&&t.match?c[e]=t:console.error("[Conditions] Invalid matcher. Must have test() and match() methods.")}(e,t),this},registerHandler(e,t){return function(e,t){if(!t.test||!t.apply)return void console.error("[Conditions] Invalid handler. Must have test() and apply() methods.");const n=Object.entries(d).pop();d[e]=t,n&&(d[n[0]]=n[1])}(e,t),this},getMatchers:()=>Object.keys(c),getHandlers:()=>Object.keys(d),get hasReactivity(){return l},get mode(){return l?"reactive":"static"}};e.Conditions=g,n&&(e.Elements.whenState=g.whenState,e.Elements.whenApply=g.apply,e.Elements.whenWatch=g.watch),o&&(e.Collections.whenState=g.whenState,e.Collections.whenApply=g.apply,e.Collections.whenWatch=g.watch),r&&(e.Selector.whenState=g.whenState,e.Selector.whenApply=g.apply,e.Selector.whenWatch=g.watch),console.log("[Conditions] v4.0.1 loaded successfully"),console.log("[Conditions] Mode:",l?"Reactive + Static":"Static only"),console.log("[Conditions] Features:"),console.log("  - Declarative condition matching with strategy pattern"),console.log("  - Extensible via registerMatcher() and registerHandler()"),console.log("  - Full backward compatibility maintained"),console.log("  - Production-ready with enhanced error handling"),console.log("  - Fixed: Proxy/Symbol iterator compatibility")}("undefined"!=typeof window?window:global),
/**
 * 02_dh-conditions-default
 * 
 * Conditions Default Branch Extension
 * @version 1.0.0
 * @description Adds explicit default branch support to Conditions.whenState()
 * @requires Conditions.js v4.0.0+
 * @license MIT
 */
function(e){"use strict";if(!e.Conditions)return void console.error("[Conditions.Default] Requires Conditions.js to be loaded first");const t=e.Conditions,n=t.whenState,o=t.apply,r=t.watch;function s(e){const t="function"==typeof e?e():e;if(!("default"in t))return e;const{default:n,...o}=t;return function(){const t="function"==typeof e?e():e,{default:n,...o}=t;return{...o,"/^[\\s\\S]*$/":n}}}t.whenState=function(e,t,o,r={}){const i=s(t);return n.call(this,e,i,o,r)},t.apply=function(e,t,n){const r=s(t);return o.call(this,e,r,n)},t.watch=function(e,t,n){const o=s(t);return r.call(this,e,o,n)},t.batch=t.batch,t.registerMatcher=t.registerMatcher,t.registerHandler=t.registerHandler,t.getMatchers=t.getMatchers,t.getHandlers=t.getHandlers,e.Elements&&(e.Elements.whenState=t.whenState,e.Elements.whenApply=t.apply,e.Elements.whenWatch=t.watch),e.Collections&&(e.Collections.whenState=t.whenState,e.Collections.whenApply=t.apply,e.Collections.whenWatch=t.watch),e.Selector&&(e.Selector.whenState=t.whenState,e.Selector.whenApply=t.apply,e.Selector.whenWatch=t.watch),t.restoreOriginal=function(){t.whenState=n,t.apply=o,t.watch=r,console.log("[Conditions.Default] Original methods restored")},t.extensions=t.extensions||{},t.extensions.defaultBranch="1.0.0",console.log("[Conditions.Default] v1.0.0 loaded"),console.log("[Conditions.Default] âœ“ Non-invasive wrapper active"),console.log("[Conditions.Default] âœ“ Original functionality preserved"),console.log("[Conditions.Default] âœ“ Use Conditions.restoreOriginal() to revert if needed")}("undefined"!=typeof window?window:global),
/**
 * 03_dh-conditions-collection-extension
 * 
 * Conditions Collection Extension
 * Adds collection-level conditional updates with index support
 * 
 * @version 1.0.0
 * @requires Conditions.js v4.0.0+
 * @license MIT
 */
function(e){"use strict";if(!e.Conditions)return void console.error("[Conditions.Collection] Requires Conditions.js");const t=e.Conditions;function n(n,o,r,s={}){const i=t.hasReactivity,a=!1!==s.reactive&&i,l="function"==typeof n?n:()=>n;function c(){let i,a,c;if("string"==typeof r)if(r.startsWith(".")&&e.ClassName){const t=r.slice(1);i=e.ClassName[t]}else{if(r.startsWith("#"))return t.whenState(n,o,r,s);i=e.querySelectorAll?e.querySelectorAll(r):document.querySelectorAll(r)}else if(r instanceof Element)i=[r];else if(r instanceof NodeList||r instanceof HTMLCollection)i=r;else{if(!Array.isArray(r))return void console.warn("[Conditions.Collection] Invalid selector");i=r}if(!i||0===i.length)return void console.warn("[Conditions.Collection] No elements found");try{a=l()}catch(e){return void console.error("[Conditions.Collection] Error getting value:",e)}try{c="function"==typeof o?o():o}catch(e){return void console.error("[Conditions.Collection] Error evaluating conditions:",e)}let h=null;for(const[e,t]of Object.entries(c))if(d(a,e)){h=t;break}if(h)if(i.update&&"function"==typeof i.update)try{i.update(h)}catch(e){console.warn("[Conditions.Collection] Error using collection.update():",e),u(i,h)}else u(i,h);else console.info("[Conditions.Collection] No matching condition for value:",a)}function u(e,t){const n=Array.from(e),o={},r={};Object.entries(t).forEach(([e,t])=>{/^-?\d+$/.test(e)?o[e]=t:r[e]=t}),Object.keys(r).length>0&&n.forEach(e=>{e&&e.update&&e.update(r)}),Object.entries(o).forEach(([e,t])=>{let o=parseInt(e);o<0&&(o=n.length+o);const r=n[o];r&&r.update&&r.update(t)})}function d(e,n){return n=String(n).trim(),t._matchCondition?t._matchCondition(e,n):"true"===n?!0===e:"false"===n?!1===e:"truthy"===n?!!e:"falsy"===n?!e:String(e)===n}if(a){if(e.ReactiveUtils&&e.ReactiveUtils.effect)return e.ReactiveUtils.effect(c);if(e.Elements&&e.Elements.effect)return e.Elements.effect(c)}return c(),{update:c,destroy:()=>{}}}t.whenStateCollection=n,t.whenCollection=n,console.log("[Conditions.Collection] v1.0.0 loaded"),console.log("[Conditions.Collection] âœ“ Supports bulk + index updates in conditions")}("undefined"!=typeof window?window:global),
/**
 * 04_Conditions.apply() - Standalone Collection-Aware Implementation
 * Works independently without requiring DOM Helpers
 * Supports index-specific updates + shared properties + DEFAULT BRANCH
 * 
 * @version 2.0.0 - Added default branch support
 * @license MIT
 */
function(e){"use strict";function t(e){if(!e)return[];if(Array.isArray(e))return e;if(e instanceof NodeList||e instanceof HTMLCollection)return Array.from(e);if("object"==typeof e&&"length"in e){const t=[],n=Number(e.length);if(!isNaN(n)&&n>=0)for(let o=0;o<n;o++)if(Object.prototype.hasOwnProperty.call(e,o)){const n=e[o];n instanceof Element&&t.push(n)}return t}return[]}function n(e){if(e instanceof Element)return[e];if(e instanceof NodeList||e instanceof HTMLCollection)return t(e);if(Array.isArray(e))return e.filter(e=>e instanceof Element);if("string"==typeof e){if(e.startsWith("#")){const t=document.getElementById(e.slice(1));return t?[t]:[]}return e.startsWith(".")?t(document.getElementsByClassName(e.slice(1))):t(document.querySelectorAll(e))}return[]}function o(e,t){if("true"===(t=String(t).trim()))return!0===e;if("false"===t)return!1===e;if("truthy"===t)return!!e;if("falsy"===t)return!e;if("null"===t)return null===e;if("undefined"===t)return void 0===e;if("empty"===t)return null==e||("string"==typeof e||Array.isArray(e)?0===e.length:"object"==typeof e?0===Object.keys(e).length:!e);if(t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'"))return String(e)===t.slice(1,-1);if(t.startsWith("includes:"))return String(e).includes(t.slice(9).trim());if(t.startsWith("startsWith:"))return String(e).startsWith(t.slice(11).trim());if(t.startsWith("endsWith:"))return String(e).endsWith(t.slice(9).trim());if(t.startsWith("/")&&t.lastIndexOf("/")>0)try{const n=t.lastIndexOf("/"),o=t.slice(1,n),r=t.slice(n+1);return new RegExp(o,r).test(String(e))}catch(e){return console.warn("[Conditions] Invalid regex:",t),!1}if("number"==typeof e){if(t.includes("-")&&!t.startsWith("<")&&!t.startsWith(">")&&!t.startsWith("=")){const n=t.split("-").map(e=>e.trim());if(2===n.length&&!isNaN(n[0])&&!isNaN(n[1])){const[t,o]=n.map(Number);return e>=t&&e<=o}}if(!isNaN(t))return e===Number(t);if(t.startsWith(">=")){const n=Number(t.slice(2).trim());return!isNaN(n)&&e>=n}if(t.startsWith("<=")){const n=Number(t.slice(2).trim());return!isNaN(n)&&e<=n}if(t.startsWith(">")&&!t.startsWith(">=")){const n=Number(t.slice(1).trim());return!isNaN(n)&&e>n}if(t.startsWith("<")&&!t.startsWith("<=")){const n=Number(t.slice(1).trim());return!isNaN(n)&&e<n}}return String(e)===t}function r(e,t){Object.entries(t).forEach(([t,n])=>{!function(e,t,n){try{if("style"===t&&"object"==typeof n&&null!==n)return void Object.entries(n).forEach(([t,n])=>{null!=n&&(e.style[t]=n)});if("classList"===t&&"object"==typeof n&&null!==n)return void(Array.isArray(n)?(e.className="",n.forEach(t=>t&&e.classList.add(t))):(n.add&&(Array.isArray(n.add)?n.add:[n.add]).forEach(t=>t&&e.classList.add(t)),n.remove&&(Array.isArray(n.remove)?n.remove:[n.remove]).forEach(t=>t&&e.classList.remove(t)),n.toggle&&(Array.isArray(n.toggle)?n.toggle:[n.toggle]).forEach(t=>t&&e.classList.toggle(t))));if(("attrs"===t||"setAttribute"===t)&&"object"==typeof n&&null!==n)return void Object.entries(n).forEach(([t,n])=>{null==n||!1===n?e.removeAttribute(t):e.setAttribute(t,String(n))});if("removeAttribute"===t)return void(Array.isArray(n)?n.forEach(t=>e.removeAttribute(t)):"string"==typeof n&&e.removeAttribute(n));if("dataset"===t&&"object"==typeof n&&null!==n)return void Object.entries(n).forEach(([t,n])=>{e.dataset[t]=String(n)});if("addEventListener"===t&&"object"==typeof n&&null!==n)return void Object.entries(n).forEach(([t,n])=>{let o,r;"function"==typeof n?o=n:"object"==typeof n&&null!==n&&(o=n.handler,r=n.options),o&&"function"==typeof o&&e.addEventListener(t,o,r)});if(t.startsWith("on")&&"function"==typeof n)return void(e[t]=n);if(t in e)return void(e[t]=n);"string"!=typeof n&&"number"!=typeof n&&"boolean"!=typeof n||e.setAttribute(t,String(n))}catch(e){console.warn(`[Conditions] Failed to apply ${t}:`,e)}}(e,t,n)})}const s={apply(e,t,s){const i=n(s);if(!i||0===i.length)return console.warn("[Conditions] No elements found for selector:",s),this;const a="function"==typeof t?t():t;if(!a||"object"!=typeof a)return console.error("[Conditions] Conditions must be an object"),this;const{default:l,...c}=a;let u=null;for(const[t,n]of Object.entries(c))if(o(e,t)){u=n;break}return!u&&l&&(u=l,console.log("[Conditions] Using default branch for value:",e)),u?(function(e,t){const n={},o={};Object.entries(t).forEach(([e,t])=>{/^-?\d+$/.test(e)?o[e]=t:n[e]=t}),Object.keys(n).length>0&&e.forEach(e=>{r(e,n)}),Object.entries(o).forEach(([t,n])=>{let o=parseInt(t);o<0&&(o=e.length+o),o>=0&&o<e.length&&r(e[o],n)})}(i,u),this):(console.info("[Conditions] No matching condition or default for value:",e),this)},batch(e){return"function"==typeof e&&e(),this},getElements:e=>n(e),testCondition:(e,t)=>o(e,t)};e.Conditions||(e.Conditions={}),e.Conditions.apply=s.apply.bind(s),e.Conditions.batch=s.batch.bind(s),e.ConditionsApply=s,console.log("[Conditions.apply] Standalone v2.0.0 loaded"),console.log("[Conditions.apply] âœ“ Collection-aware with index support"),console.log("[Conditions.apply] âœ“ Default branch support enabled"),console.log("[Conditions.apply] âœ“ Works independently")}("undefined"!=typeof window?window:global),
/**
 * 05_dh-conditions-shortcuts.js
 * 
 * Global Shortcuts for Conditions
 * Provides direct global access to Conditions methods without namespace prefix
 * 
 * @version 1.0.0
 * @requires 01_dh-conditional-rendering.js (Conditions.js v4.0.0+)
 * @license MIT
 * 
 * Usage:
 *   whenState(state.count, conditions, '.counter')
 *   whenWatch(state.user, conditions, '#profile')
 *   whenApply('active', conditions, '.btn')
 * 
 * Fallback:
 *   If conflicts detected, access via: CondShortcuts.whenState()
 */
function(e){"use strict";if(!e.Conditions)return console.error("[Conditions.Shortcuts] Requires Conditions.js to be loaded first"),void console.error("[Conditions.Shortcuts] Please load 01_dh-conditional-rendering.js before this file");const t=e.Conditions,n=["whenState","apply","watch"].filter(e=>"function"!=typeof t[e]);if(n.length>0)return void console.error("[Conditions.Shortcuts] Missing required Conditions methods:",n);const o=["whenState","whenWatch","whenApply"].filter(t=>t in e);let r=!1;function s(e,n,o,r){return t.whenState(e,n,o,r)}function i(e,n,o){return t.watch(e,n,o)}function a(e,n,o){return t.apply(e,n,o)}function l(e){return t.batch(e)}o.length>0&&(console.warn("[Conditions.Shortcuts] âš ï¸  Naming conflicts detected:",o),console.warn("[Conditions.Shortcuts] â†’ Using fallback namespace: CondShortcuts"),r=!0);const c={whenState:s,whenWatch:i,whenApply:a,whenBatch:l};r?(e.CondShortcuts=c,t.shortcuts=c,console.log("[Conditions.Shortcuts] v1.0.0 loaded (namespace mode)"),console.log("[Conditions.Shortcuts] âœ“ Available via: CondShortcuts.whenState()"),console.log("[Conditions.Shortcuts] âœ“ Available via: Conditions.shortcuts.whenState()"),console.log("[Conditions.Shortcuts] â„¹ï¸  Direct globals unavailable due to conflicts")):(e.whenState=s,e.whenWatch=i,e.whenApply=a,e.whenBatch=l,t.shortcuts=c,console.log("[Conditions.Shortcuts] v1.0.0 loaded"),console.log("[Conditions.Shortcuts] âœ“ whenState() - Auto-reactive conditional rendering"),console.log("[Conditions.Shortcuts] âœ“ whenWatch() - Explicit reactive watching"),console.log("[Conditions.Shortcuts] âœ“ whenApply() - One-time static application"),console.log("[Conditions.Shortcuts] âœ“ whenBatch() - Batch multiple updates"),console.log("[Conditions.Shortcuts] â„¹ï¸  Fallback: Conditions.shortcuts.whenState()")),t.extensions=t.extensions||{},t.extensions.shortcuts={version:"1.0.0",mode:r?"namespace":"global",conflicts:o.length>0?o:null},t.removeShortcuts=function(){r?(delete e.CondShortcuts,console.log("[Conditions.Shortcuts] CondShortcuts namespace removed")):(delete e.whenState,delete e.whenWatch,delete e.whenApply,delete e.whenBatch,console.log("[Conditions.Shortcuts] Global shortcuts removed")),delete t.shortcuts,delete t.extensions.shortcuts},"undefined"!=typeof process&&"production"===process.env.NODE_ENV||(t.printShortcuts=function(){console.group("[Conditions.Shortcuts] Configuration"),console.log("Version:",t.extensions.shortcuts.version),console.log("Mode:",t.extensions.shortcuts.mode),console.log("Conflicts:",t.extensions.shortcuts.conflicts||"None"),console.log("Available methods:",Object.keys(c)),console.log("Reactivity:",t.hasReactivity?"Available":"Not available"),console.groupEnd()})}("undefined"!=typeof window?window:global),
/**
 * 06_dh-matchers-handlers-shortcut.js
 * 
 * Conditions Extensions API - Global Shortcuts
 * Provides convenient global functions for registering custom matchers and handlers
 * 
 * @version 1.0.0
 * @requires Conditions.js v4.0.0+
 * @license MIT
 */
function(e){"use strict";if(!e.Conditions)return console.error("[Conditions.Extensions] Requires Conditions.js to be loaded first"),void console.error("[Conditions.Extensions] Please load 01_dh-conditional-rendering.js before this file");const t=e.Conditions;if(!t.registerMatcher||!t.registerHandler)return console.error("[Conditions.Extensions] Conditions.js version is too old"),void console.error("[Conditions.Extensions] Required: v4.0.0+ with registerMatcher() and registerHandler()");function n(e,n){if(!n||"object"!=typeof n)return console.error("[registerMatcher] Matcher must be an object, got "+typeof n),f;if("function"!=typeof n.test)return console.error(`[registerMatcher] Matcher.test must be a function for "${e}"`),f;if("function"!=typeof n.match)return console.error(`[registerMatcher] Matcher.match must be a function for "${e}"`),f;try{t.registerMatcher(e,n),console.log(`[registerMatcher] âœ“ Registered: ${e}`)}catch(t){console.error(`[registerMatcher] Failed to register "${e}":`,t)}return f}function o(e,n){if(!n||"object"!=typeof n)return console.error("[registerHandler] Handler must be an object, got "+typeof n),f;if("function"!=typeof n.test)return console.error(`[registerHandler] Handler.test must be a function for "${e}"`),f;if("function"!=typeof n.apply)return console.error(`[registerHandler] Handler.apply must be a function for "${e}"`),f;try{t.registerHandler(e,n),console.log(`[registerHandler] âœ“ Registered: ${e}`)}catch(t){console.error(`[registerHandler] Failed to register "${e}":`,t)}return f}function r(){return"function"==typeof t.getMatchers?t.getMatchers():(console.warn("[getMatchers] Not available in this version of Conditions.js"),[])}function s(){return"function"==typeof t.getHandlers?t.getHandlers():(console.warn("[getHandlers] Not available in this version of Conditions.js"),[])}function i(e){return r().includes(e)}function a(e){return s().includes(e)}function l(e){if(!e||"object"!=typeof e)return console.error("[registerMatchers] Argument must be an object"),f;let t=0,o=0;return Object.entries(e).forEach(([e,r])=>{try{n(e,r),t++}catch(t){console.error(`[registerMatchers] Failed to register "${e}":`,t),o++}}),console.log(`[registerMatchers] âœ“ Registered ${t} matchers${o?`, ${o} failed`:""}`),f}function c(e){if(!e||"object"!=typeof e)return console.error("[registerHandlers] Argument must be an object"),f;let t=0,n=0;return Object.entries(e).forEach(([e,r])=>{try{o(e,r),t++}catch(t){console.error(`[registerHandlers] Failed to register "${e}":`,t),n++}}),console.log(`[registerHandlers] âœ“ Registered ${t} handlers${n?`, ${n} failed`:""}`),f}function u(e,t,o){return n(e,{test:e=>e===t,match:e=>o(e)})}function d(e,t,n){return o(e,{test:e=>e===t,apply:(e,t)=>n(e,t)})}function h(){const e=r(),t=s();return console.group("[Conditions.Extensions] Registered Extensions"),console.log(`ðŸ“‹ Matchers (${e.length}):`,e),console.log(`ðŸ”§ Handlers (${t.length}):`,t),console.groupEnd(),f}const f={registerMatcher:n,registerHandler:o,registerMatchers:l,registerHandlers:c,getMatchers:r,getHandlers:s,hasMatcher:i,hasHandler:a,createSimpleMatcher:u,createSimpleHandler:d,listExtensions:h,addMatcher:n,addHandler:o,listMatchers:r,listHandlers:s};e.registerMatcher=n,e.registerHandler=o,e.registerMatchers=l,e.registerHandlers=c,e.getMatchers=r,e.getHandlers=s,e.hasMatcher=i,e.hasHandler=a,e.createSimpleMatcher=u,e.createSimpleHandler=d,e.listExtensions=h,e.ConditionsExtensions=f,t.extensions=t.extensions||{},Object.assign(t.extensions,f),e.Elements&&(e.Elements.registerMatcher=n,e.Elements.registerHandler=o,e.Elements.getMatchers=r,e.Elements.getHandlers=s),e.Collections&&(e.Collections.registerMatcher=n,e.Collections.registerHandler=o),console.log("[Conditions.Extensions] v1.0.0 loaded successfully"),console.log("[Conditions.Extensions] âœ“ Global shortcuts active"),console.log("[Conditions.Extensions] âœ“ Available functions:"),console.log("  - registerMatcher(name, { test, match })"),console.log("  - registerHandler(name, { test, apply })"),console.log("  - registerMatchers({ name: {...}, ... })"),console.log("  - registerHandlers({ name: {...}, ... })"),console.log("  - getMatchers() / getHandlers()"),console.log("  - hasMatcher(name) / hasHandler(name)"),console.log("  - createSimpleMatcher(name, keyword, checkFn)"),console.log("  - createSimpleHandler(name, key, applyFn)"),console.log("  - listExtensions()"),console.log("[Conditions.Extensions] ðŸ“š Use listExtensions() to see all registered extensions")}("undefined"!=typeof window?window:global),
/**
 * 07_dh-conditions-array-support.js
 * 
 * Array Distribution Support for Conditions
 * Enhances Conditions to support array-based updates even in manual fallback paths
 * 
 * @version 1.0.0
 * @requires 01_dh-conditional-rendering.js (Conditions.js v4.0.0+)
 * @requires 10_dh-array-based-updates.js (ArrayBasedUpdates)
 * @license MIT
 */
function(e){"use strict";if(console.log("[Conditions.ArraySupport] v1.0.0 Loading..."),!e.Conditions)return void console.error("[Conditions.ArraySupport] Requires Conditions.js to be loaded first");if(!e.ArrayBasedUpdates)return console.error("[Conditions.ArraySupport] Requires ArrayBasedUpdates to be loaded first"),void console.error("[Conditions.ArraySupport] Please load 10_dh-array-based-updates.js before this file");const t=e.Conditions,n=e.ArrayBasedUpdates;function o(e){if(!e||"object"!=typeof e||Array.isArray(e))return!1;for(const t of Object.values(e)){if(Array.isArray(t))return!0;if(t&&"object"==typeof t&&!Array.isArray(t)&&o(t))return!0}return!1}function r(e,t,o){if(!e||"object"!=typeof e||Array.isArray(e))return e;const s={};return Object.entries(e).forEach(([e,i])=>{if("style"===e||"dataset"===e)"object"!=typeof i||null===i||Array.isArray(i)?Array.isArray(i)?s[e]=n.getValueForIndex(i,t,o):s[e]=i:s[e]=r(i,t,o);else if("classList"===e)if("object"!=typeof i||null===i||Array.isArray(i))s[e]=i;else{const r={};Object.entries(i).forEach(([e,s])=>{r[e]=n.getValueForIndex(s,t,o)}),s[e]=r}else s[e]=n.getValueForIndex(i,t,o)}),s}function s(e,t){const n={},s={};Object.entries(t).forEach(([e,t])=>{/^-?\d+$/.test(e)?s[e]=t:n[e]=t});const a=o(n);Object.keys(n).length>0&&(a?(console.log("[Conditions.ArraySupport] Distributing arrays across",e.length,"elements"),e.forEach((t,o)=>{i(t,r(n,o,e.length))})):e.forEach(e=>{i(e,n)})),Object.entries(s).forEach(([t,n])=>{let o=parseInt(t);if(o<0&&(o=e.length+o),o>=0&&o<e.length){i(e[o],n)}})}function i(e,t){e.update&&"function"==typeof e.update?e.update(t):Object.entries(t).forEach(([t,n])=>{try{"style"===t&&"object"==typeof n&&null!==n?Object.assign(e.style,n):t in e?e[t]=n:e.setAttribute(t,n)}catch(e){console.warn("[Conditions.ArraySupport] Failed to apply",t,":",e.message)}})}if(e.ConditionsApply&&e.Conditions.apply){console.log("[Conditions.ArraySupport] âœ“ Patching Conditions.apply()");const t=e.Conditions.apply.bind(e.Conditions);e.Conditions.apply=function(t,n,o){const r=e.ConditionsApply.getElements,i=r?r(o):[];if(!i||0===i.length)return console.warn("[Conditions.ArraySupport] No elements found for selector:",o),this;const a="function"==typeof n?n():n;if(!a||"object"!=typeof a)return console.error("[Conditions.ArraySupport] Conditions must be an object"),this;const{default:l,...c}=a;let u=null;for(const[n,o]of Object.entries(c))if(e.ConditionsApply.testCondition(t,n)){u=o;break}return!u&&l&&(u=l,console.log("[Conditions.ArraySupport] Using default branch for value:",t)),u?(s(i,u),this):(console.info("[Conditions.ArraySupport] No matching condition or default for value:",t),this)},e.Conditions._originalApply=t}else console.warn("[Conditions.ArraySupport] âš ï¸  Conditions.apply not found - partial support only");t.hasArrayValues=o,t.applyWithArrays=function(e,t){if(!e||!t)return;const n=Array.isArray(e)?e:Array.from(e);if(o(t))return console.log("[Conditions.ArraySupport] Applying with array distribution"),s(n,t);console.log("[Conditions.ArraySupport] Applying bulk update"),n.forEach(e=>{e&&e.update&&e.update(t)})};const a={version:"1.0.0",containsArrayValues:o,processUpdatesForElement:r,enhancedApplyManually:function(e,t){const n=Array.from(e);if(0===n.length)return;const s={},i={};Object.entries(t).forEach(([e,t])=>{/^-?\d+$/.test(e)?s[e]=t:i[e]=t});const a=o(i);Object.keys(i).length>0&&(a?(console.log("[Conditions.ArraySupport] Distributing arrays across",n.length,"elements"),n.forEach((e,t)=>{if(e&&e.update){const o=r(i,t,n.length);e.update(o)}})):n.forEach(e=>{e&&e.update&&e.update(i)})),Object.entries(s).forEach(([e,t])=>{let o=parseInt(e);o<0&&(o=n.length+o);const r=n[o];r&&r.update&&r.update(t)})},enhancedApplyToCollection:s,applyConfigToElement:i};t.arraySupport=a,e.ConditionsArraySupport=a,t.restoreArraySupport=function(){e.Conditions._originalApply&&(e.Conditions.apply=e.Conditions._originalApply,console.log("[Conditions.ArraySupport] Original apply() restored"))},console.log("[Conditions.ArraySupport] âœ“âœ“âœ“ v1.0.0 loaded successfully"),console.log("[Conditions.ArraySupport] âœ“ Array distribution now supported in Conditions.apply()"),console.log("[Conditions.ArraySupport] âœ“ Use Conditions.applyWithArrays(elements, config) for manual control"),console.log("[Conditions.ArraySupport] ðŸ“š Example:"),console.log('  Conditions.apply("active", {'),console.log('    active: { textContent: ["A", "B", "C"], style: { color: ["red", "blue", "green"] } }'),console.log('  }, ".items");')}("undefined"!=typeof window?window:global),
/**
 * 08_dh-conditions-batch-states.js
 * 
 * Batch States Extension for Conditions
 * Provides convenient batch methods for multiple conditional updates
 * 
 * @version 1.0.0
 * @requires 01_dh-conditional-rendering.js (Conditions.js v4.0.0+)
 * @license MIT
 * 
 * Usage:
 *   // Mixed mode (auto-detect reactivity):
 *   const cleanup = Conditions.whenStates([
 *     [state.a, condA, '.foo', { reactive: true }],
 *     [state.b, condB, '.bar', { reactive: false }]
 *   ]);
 * 
 *   // Force reactive mode for all:
 *   const cleanup = Conditions.whenWatches([
 *     [state.a, condA, '.foo'],
 *     [state.b, condB, '.bar']
 *   ]);
 * 
 *   // Force non-reactive (one-time apply) for all:
 *   const cleanup = Conditions.whenApplies([
 *     ['active', condA, '.foo'],
 *     [42, condB, '.bar']
 *   ]);
 *   
 *   // Later: cleanup.destroy();
 */
function(e){"use strict";if(console.log("[Conditions.BatchStates] v1.0.0 Loading..."),!e.Conditions)return console.error("[Conditions.BatchStates] Requires Conditions.js to be loaded first"),void console.error("[Conditions.BatchStates] Please load 01_dh-conditional-rendering.js before this file");const t=e.Conditions;if("function"!=typeof t.whenState)return console.error("[Conditions.BatchStates] Conditions.whenState() not found"),void console.error("[Conditions.BatchStates] Required: Conditions.js v4.0.0+");if("function"!=typeof t.batch)return console.error("[Conditions.BatchStates] Conditions.batch() not found"),void console.error("[Conditions.BatchStates] Required: Conditions.js v4.0.0+");function n(e,t){if(!Array.isArray(e))return console.warn(`[Conditions.BatchStates] Config at index ${t} must be an array, got ${typeof e}`),!1;if(e.length<3)return console.warn(`[Conditions.BatchStates] Config at index ${t} must have at least 3 elements [valueFn, conditions, selector], got ${e.length}`),!1;const[n,o,r]=e;return null==n?(console.warn(`[Conditions.BatchStates] Config at index ${t}: valueFn is required`),!1):!o||"object"!=typeof o&&"function"!=typeof o?(console.warn(`[Conditions.BatchStates] Config at index ${t}: conditions must be an object or function`),!1):!!r||(console.warn(`[Conditions.BatchStates] Config at index ${t}: selector is required`),!1)}function o(e){if(!Array.isArray(e))return console.error("[Conditions.BatchStates] whenStates() requires an array of configurations"),console.error("[Conditions.BatchStates] Expected: [[valueFn, conditions, selector, options?], ...]"),{update:()=>{},destroy:()=>{},count:0,getCleanups:()=>[]};if(0===e.length)return console.warn("[Conditions.BatchStates] Empty array provided to whenStates()"),{update:()=>{},destroy:()=>{},count:0,getCleanups:()=>[]};const o=[];let s=0;t.batch(()=>{e.forEach((e,r)=>{if(!n(e,r))return;const[i,a,l,c]=e;try{const e=t.whenState(i,a,l,c);e&&"object"==typeof e&&o.push(e),s++}catch(e){console.error(`[Conditions.BatchStates] Error executing config at index ${r}:`,e)}})});return s>0&&console.log(`[Conditions.BatchStates] âœ“ Initialized ${s} state watchers`),r(o)}function r(e){return{update(){let t=0;e.forEach((e,n)=>{try{e&&"function"==typeof e.update&&(e.update(),t++)}catch(e){console.error(`[Conditions.BatchStates] Error updating cleanup at index ${n}:`,e)}}),console.log(`[Conditions.BatchStates] Updated ${t}/${e.length} watchers`)},destroy(){let t=0;e.forEach((e,n)=>{try{e&&"function"==typeof e.destroy&&(e.destroy(),t++)}catch(e){console.error(`[Conditions.BatchStates] Error destroying cleanup at index ${n}:`,e)}}),console.log(`[Conditions.BatchStates] Destroyed ${t}/${e.length} watchers`),e.length=0},get count(){return e.length},getCleanups:()=>[...e]}}function s(e){if(!Array.isArray(e))return console.error("[Conditions.BatchStates] whenWatches() requires an array of configurations"),{update:()=>{},destroy:()=>{},count:0,getCleanups:()=>[]};const t=e.map(e=>{if(!Array.isArray(e)||e.length<3)return e;const[t,n,o,r={}]=e;return[t,n,o,{...r,reactive:!0}]});return console.log("[Conditions.BatchStates] Executing batch with reactive mode enabled"),o(t)}function i(e){if(!Array.isArray(e))return console.error("[Conditions.BatchStates] whenApplies() requires an array of configurations"),{update:()=>{},destroy:()=>{},count:0,getCleanups:()=>[]};if(0===e.length)return console.warn("[Conditions.BatchStates] Empty array provided to whenApplies()"),{update:()=>{},destroy:()=>{},count:0,getCleanups:()=>[]};const o=[];let s=0;return t.batch(()=>{e.forEach((e,r)=>{if(!n(e,r))return;const[i,a,l]=e;try{t.apply(i,a,l),s++,o.push({update:()=>{t.apply(i,a,l)},destroy:()=>{}})}catch(e){console.error(`[Conditions.BatchStates] Error executing apply at index ${r}:`,e)}})}),s>0&&console.log(`[Conditions.BatchStates] âœ“ Applied ${s} static conditions`),r(o)}function a(e,t="state"){if(!Array.isArray(e))return console.error("[Conditions.BatchStates] createBatchConfig() requires an array"),()=>({update:()=>{},destroy:()=>{},count:0,getCleanups:()=>[]});const n={state:o,watch:s,apply:i}[t]||o;return function(){return n(e)}}t.whenStates=o,t.whenWatches=s,t.whenApplies=i,t.createBatchConfig=a,t.combineBatches=function(...e){return o(e.flat())},e.Elements&&(e.Elements.whenStates=o,e.Elements.whenWatches=s,e.Elements.whenApplies=i,e.Elements.createBatchConfig=a),e.Collections&&(e.Collections.whenStates=o,e.Collections.whenWatches=s,e.Collections.whenApplies=i,e.Collections.createBatchConfig=a),e.Selector&&(e.Selector.whenStates=o,e.Selector.whenWatches=s,e.Selector.whenApplies=i,e.Selector.createBatchConfig=a),e.whenState?(e.whenStates||(e.whenStates=o,console.log("[Conditions.BatchStates] âœ“ Global shortcut: whenStates()")),e.whenWatches||(e.whenWatches=s,console.log("[Conditions.BatchStates] âœ“ Global shortcut: whenWatches()")),e.whenApplies||(e.whenApplies=i,console.log("[Conditions.BatchStates] âœ“ Global shortcut: whenApplies()"))):e.CondShortcuts&&(e.CondShortcuts.whenStates=o,e.CondShortcuts.whenWatches=s,e.CondShortcuts.whenApplies=i,console.log("[Conditions.BatchStates] âœ“ Added to CondShortcuts namespace")),t.extensions=t.extensions||{},t.extensions.batchStates={version:"1.0.0",methods:["whenStates","whenWatches","whenApplies","createBatchConfig","combineBatches"]},console.log("[Conditions.BatchStates] âœ“âœ“âœ“ v1.0.0 loaded successfully"),console.log("[Conditions.BatchStates] âœ“ Available methods:"),console.log("  - Conditions.whenStates([[valueFn, cond, sel, opts?], ...])"),console.log("  - Conditions.whenWatches([[valueFn, cond, sel], ...]) - Forces reactive mode"),console.log("  - Conditions.whenApplies([[value, cond, sel], ...]) - Forces non-reactive mode"),console.log("  - Conditions.createBatchConfig(configs, mode?)"),console.log("  - Conditions.combineBatches(...configArrays)"),console.log("[Conditions.BatchStates] ðŸ“š Examples:"),console.log("  // Mixed mode (default):"),console.log("  Conditions.whenStates(["),console.log('    [state.count, countCond, ".counter", { reactive: true }],'),console.log('    ["active", activeCond, ".btn", { reactive: false }]'),console.log("  ]);"),console.log(""),console.log("  // All reactive:"),console.log("  Conditions.whenWatches(["),console.log('    [state.count, countCond, ".counter"],'),console.log('    [state.active, activeCond, ".btn"]'),console.log("  ]);"),console.log(""),console.log("  // All static:"),console.log("  Conditions.whenApplies(["),console.log('    ["active", activeCond, ".btn"],'),console.log('    [42, numberCond, ".count"]'),console.log("  ]);")}("undefined"!=typeof window?window:global),
/**
 * 09_dh-conditions-cleanup-fix.js
 * 
 * Event Listener Cleanup Fix for Conditions
 * Patches whenState() to properly cleanup event listeners on destroy()
 * 
 * @version 1.0.0
 * @requires 01_dh-conditional-rendering.js (Conditions.js v4.0.0+)
 * @license MIT
 * 
 * Problem Fixed:
 *   - Previously: destroy() didn't remove the last set of event listeners
 *   - Now: All listeners are properly cleaned up when cleanup.destroy() is called
 * 
 * Usage:
 *   Just load this file after the core Conditions module.
 *   No API changes - existing code works as before, but with proper cleanup.
 */
function(e){"use strict";if(console.log("[Conditions.CleanupFix] v1.0.0 Loading..."),!e.Conditions)return console.error("[Conditions.CleanupFix] Requires Conditions.js to be loaded first"),void console.error("[Conditions.CleanupFix] Please load 01_dh-conditional-rendering.js before this file");const t=e.Conditions;if("function"!=typeof t.whenState)return console.error("[Conditions.CleanupFix] Conditions.whenState() not found"),void console.error("[Conditions.CleanupFix] Required: Conditions.js v4.0.0+");function n(e){if(e&&e._whenStateListeners)try{e._whenStateListeners.forEach(({event:t,handler:n,options:o})=>{e.removeEventListener(t,n,o)}),e._whenStateListeners=[]}catch(e){console.warn("[Conditions.CleanupFix] Error cleaning up listeners:",e)}}function o(e){if(!e||0===e.size)return;let t=0;e.forEach(e=>{e&&e._whenStateListeners&&e._whenStateListeners.length>0&&(n(e),t++)}),t>0&&console.log(`[Conditions.CleanupFix] Cleaned up listeners from ${t} element(s)`)}const r=t.whenState;if(t.whenState=function(e,t,n,s={}){const i=new Set;let a=!1;function l(){if(!a)try{const e=function(e){try{if(e instanceof Element)return[e];if(e instanceof NodeList||e instanceof HTMLCollection)return Array.from(e);if(Array.isArray(e))return e.filter(e=>e instanceof Element);if("string"==typeof e){if(e.startsWith("#")){const t=document.getElementById(e.slice(1));return t?[t]:[]}return e.startsWith(".")?Array.from(document.getElementsByClassName(e.slice(1))):Array.from(document.querySelectorAll(e))}return[]}catch(e){return console.warn("[Conditions.CleanupFix] Error getting elements:",e),[]}}(n);e.forEach(e=>{e instanceof Element&&i.add(e)})}catch(e){console.warn("[Conditions.CleanupFix] Error tracking elements:",e)}}l();const c=r.call(this,e,t,n,s);return c&&"object"==typeof c?{update:()=>{if(!a&&(l(),c.update&&"function"==typeof c.update))return c.update()},destroy:()=>{if(!a){if(o(i),i.clear(),c.destroy&&"function"==typeof c.destroy)try{c.destroy()}catch(e){console.warn("[Conditions.CleanupFix] Error in original destroy:",e)}a=!0,console.log("[Conditions.CleanupFix] âœ“ Cleanup completed")}},...c||{}}:{update:()=>{if(!a)return l(),r.call(this,e,t,n,s)},destroy:()=>{a||(o(i),i.clear(),a=!0)}}},t._originalWhenState=r,t.watch&&"function"==typeof t.watch){const e=t.watch;t.watch=function(e,t,n){return this.whenState(e,t,n,{reactive:!0})},t._originalWatch=e,console.log("[Conditions.CleanupFix] âœ“ Patched watch()")}if(t.whenStateCollection&&"function"==typeof t.whenStateCollection){t.whenStateCollection;console.log("[Conditions.CleanupFix] â„¹ï¸  whenStateCollection checked (no listener cleanup needed)")}t.cleanupAllListeners=function(){let e=0;return document.querySelectorAll("*").forEach(t=>{t._whenStateListeners&&t._whenStateListeners.length>0&&(n(t),e++)}),console.log(`[Conditions.CleanupFix] Emergency cleanup: removed listeners from ${e} element(s)`),e},t.checkListenerLeaks=function(){const e=document.querySelectorAll("*"),t=[];return e.forEach(e=>{e._whenStateListeners&&e._whenStateListeners.length>0&&t.push({element:e,listenerCount:e._whenStateListeners.length,listeners:e._whenStateListeners})}),t.length>0?(console.group("[Conditions.CleanupFix] Listener Leak Check"),console.warn(`âš ï¸  Found ${t.length} element(s) with active listeners`),t.forEach(({element:e,listenerCount:t,listeners:n})=>{console.log("Element:",e),console.log("  Listeners:",t),console.log("  Details:",n)}),console.groupEnd()):console.log("[Conditions.CleanupFix] âœ“ No listener leaks detected"),t},t.restoreCleanupFix=function(){t._originalWhenState&&(t.whenState=t._originalWhenState,console.log("[Conditions.CleanupFix] Original whenState() restored")),t._originalWatch&&(t.watch=t._originalWatch,console.log("[Conditions.CleanupFix] Original watch() restored")),delete t.cleanupAllListeners,delete t.checkListenerLeaks,delete t.restoreCleanupFix,console.log("[Conditions.CleanupFix] Cleanup fix removed")},t.extensions=t.extensions||{},t.extensions.cleanupFix={version:"1.0.0",fixed:["Event listener cleanup on destroy()","Memory leak prevention","Proper cleanup for reactive and non-reactive modes"],utilities:["Conditions.cleanupAllListeners() - Emergency cleanup","Conditions.checkListenerLeaks() - Debug memory leaks","Conditions.restoreCleanupFix() - Remove patch"]},e.Elements&&e.Elements.whenState&&(e.Elements.whenState=t.whenState,e.Elements.whenWatch=t.watch,console.log("[Conditions.CleanupFix] âœ“ Updated Elements shortcuts")),e.Collections&&e.Collections.whenState&&(e.Collections.whenState=t.whenState,e.Collections.whenWatch=t.watch,console.log("[Conditions.CleanupFix] âœ“ Updated Collections shortcuts")),e.Selector&&e.Selector.whenState&&(e.Selector.whenState=t.whenState,e.Selector.whenWatch=t.watch,console.log("[Conditions.CleanupFix] âœ“ Updated Selector shortcuts")),e.whenState&&e.whenState!==t.whenState&&(e.whenState=t.whenState,console.log("[Conditions.CleanupFix] âœ“ Updated global whenState shortcut")),e.whenWatch&&e.whenWatch!==t.watch&&(e.whenWatch=t.watch,console.log("[Conditions.CleanupFix] âœ“ Updated global whenWatch shortcut")),console.log("[Conditions.CleanupFix] âœ“âœ“âœ“ v1.0.0 loaded successfully"),console.log("[Conditions.CleanupFix] âœ“ Event listener cleanup now works properly"),console.log("[Conditions.CleanupFix] âœ“ Memory leak prevention active"),console.log("[Conditions.CleanupFix] ðŸ› ï¸  Debug utilities available:"),console.log("  - Conditions.checkListenerLeaks() - Find elements with active listeners"),console.log("  - Conditions.cleanupAllListeners() - Emergency cleanup all listeners"),console.log("  - Conditions.restoreCleanupFix() - Remove this patch"),console.log("[Conditions.CleanupFix] ðŸ“š Example:"),console.log('  const cleanup = Conditions.whenState(state.count, conditions, ".btn");'),console.log("  // Later:"),console.log("  cleanup.destroy(); // âœ“ Now properly removes all event listeners!")}("undefined"!=typeof window?window:global);